# 正则表达式的学习和应用

陈小熊

## 高效学习

### 1.《自学是一门手艺》

在书中的第三章的 “正则表达式”，笑来老师说：“正则表达式本质上是个独立的语言，短小却格外强悍 —— 乃至于，如果你竟然没学会它的话，你的之前学的编程技能干脆与残疾无异。”

学完它，能让我快速掌握正则表达的最少必要知识！

如：

| 排列 | 原子与操作符优先级                 | （从高到低）                                                 |
| ---- | ---------------------------------- | ------------------------------------------------------------ |
| 1    | 转义符号 (Escaping Symbol)         | `\`                                                          |
| 2    | 分组、捕获 (Grouping or Capturing) | `(...)` `(?:...)` `(?=...)` `(?!...)` `(?<=...)` `(?<!...)`  |
| 3    | 数量 (Quantifiers)                 | `a*` `a+` `a?` `a{n, m}`                                     |
| 4    | 序列与定位（Sequence and Anchor）  | `abc` `^` `$` `\b` `\B`                                      |
| 5    | 或（Alternation）                  | <code>a&#124;b&#124;c</code>                                 |
| 6    | 原子 (Atoms)                       | `a` `[^abc]` `\t` `\r` `\n` `\d` `\D` `\s` `\S` `\w` `\W` `.` |

**类别原子包括：**

```
\d` 任意数字；等价于 `[0-9]
\D` 任意非数字；等价于 `[^0-9]
\w` 任意本义字符；等价于 `[a-zA-Z0-9_]
\W` 任意非本义字符；等价于 `[^a-zA-Z0-9_]
```

`\s` 任意空白；相当于 `[ \f\n\r\t\v]`（注意，方括号内第一个字符是空格符号）

`\S` 任意非空白；相当于 `[^ \f\n\r\t\v]`（注意，紧随 `^` 之后的是一个空格符号）

```
.` 除 `\r` `\n` 之外的任意字符；相当于 `[^\r\n]
```

**定位操作符：**

`^` 匹配被搜索字符串的开始位置；

`$` 匹配被搜索字符串的结束位置；

`\b` 匹配单词的边界；[`er\b`](https://regexper.com#er%5Cb)，能匹配 `coder` 中的 `er`，却不能匹配 `error` 中的 `er`；

`\B` 匹配非单词边界；[`er\B`](https://regexper.com#er%5CB)，能匹配 `error` 中的 `er`，却不能匹配 `coder` 中的 `er`。

**数量操作符有：**

`+` `?` `*` `{n, m}`。

它们是用来限定位于它们之前的原子允许出现的个数；不加数量限定则代表出现一次且仅出现一次：

```
+` 代表前面的原子必须至少出现一次，即：` 出现次数 ≧ 1
```

> 例如，[`go+gle`](https://regexper.com#go+gle)可以匹配 `google` `gooogle` `goooogle` 等；

```
?` 代表前面的原子最多只可以出现一次，即：`0 ≦ 出现次数 ≦ 1
```

> 例如，[`colou?red`](https://regexper.com#colou?red)可以匹配 `colored` 或者 `coloured`;

```
*` 代表前面的原子可以不出现，也可以出现一次或者多次，即：` 出现次数 ≧ 0
```

> 例如，[`520*`](https://regexper.com#520*)可以匹配 `52` `520` `52000` `5200000` `520000000000` 等。

`{n}` 之前的原子出现确定的 `n` 次；

`{n,}` 之前的原子出现至少 `n` 次；

`{n, m}` 之前的原子出现至少 `n` 次，至多 `m` 次

> 例如，[`go{2,5}gle`](https://regexper.com#go%7B2,5%7Dgle)，能匹配 `google` `gooogle` `goooogle` 或 `gooooogle`，但不能匹配 `gogle` 和 `gooooooogle`

### 2.编程胶囊

学习完《自学是一门手艺》的 “正则表达式”后，就可以通过短时间内大量重复来熟悉相应的使用规则啦。

极力推荐 [编程胶囊](https://www.codejiaonang.com/#/courses)，它课程很全面，又入门，进阶，到通关挑战。每道题都又答案反馈！

![87598a20f7fdc02582545b2c06aa7c4](https://raw.githubusercontent.com/cxiaoxiong/images/master/202306291051997.png)

### 3.[RegexLearn]([Regex Learn - 正则表达式交互式课程](https://regexlearn.com/zh-cn/learn))

这个网站又五十多题目，是对上面的练习的一个补充。网站是 [RegexLearn]([Regex Learn - 正则表达式交互式课程](https://regexlearn.com/zh-cn/learn))。

![34c6f5de30542359b72e3929d46e783](../../XIAOXI~1/AppData/Local/Temp/WeChat Files/34c6f5de30542359b72e3929d46e783.png)

## 高效应用

我有一个使用正则表达式的**刚需**——排版文字，如整理笑来老师课程内容，根据排版的要求，中文和数字、英文前后需要有一个空格。如这段文字：

> 我原来的服务号上大概有 50 万左右的粉丝，迁走之后，我又重新注册了同样的名称叫笑来的服务号。现在好像已经 4000 多粉丝了吧？要从零开始，昨天我在那上面发了一篇文章《李笑来不是什么？》，李笑来不是老师，准确讲也不是什么导师的，更不是什么导师的。准确讲，我应该算是 Life Hacker，就是一个人生黑客，把自己的人生当做一台电脑去研究，黑进去。

我整理课程的内容有时候 50 多万字，如果每个都需要手动，单单这项工作量就花费我大量的时间和精力，扼杀我对整理和排版文字的乐趣。

方法如下：

> 中文在左，数字或英文字母在右```  ([\u4e00-\u9fa5]+)([\da-zA-Z]+)```
> 数字或英文字母在左，中文在右 ``` ([\da-zA-Z]+)([\u4e00-\u9fa5]+)``` 
> 然后 replace 行填写 $1 $2 用于定义格式。

具体操作请看视频教程：

<iframe src="//player.bilibili.com/player.html?aid=530330992&bvid=BV1Zu411t762&cid=1179709954&page=1" scrolling="no" border="0" height="500" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>



